<md-content layout="column" layout-padding flex md-whiteframe="2" xmlns="http://www.w3.org/1999/html">
	<div flex>
		<form>
			<div layout layout-align="center" layout-xs="column">
				<md-input-container flex="10">
					<label>Préfixe</label>
					<md-select ng-model="crawl.prefixeSelected" name="prefixe" required>
						<md-option value="http://">http://</md-option>
						<md-option value="https://">https://</md-option>
					</md-select>
				</md-input-container>
				<md-input-container flex="40" class="md-icon-float md-block">
					<label>URL</label>
					<input ng-model="crawl.url" name="url">
				</md-input-container>
				<div flex="50">
					<md-button class="md-raised" ng-click="crawl.crawl()" type="submit">CRAWL</md-button>
				</div>
			</div>
		</form>

		<div layout layout-padding>
			<md-toolbar class="md-tall md-accent" ng-if="crawl.crawlError">
				<h2 class="md-toolbar-tools">{{crawl.crawlError}}</h2>
			</md-toolbar>
		</div>
		<div layout layout-wrap ng-show="crawl.isCrawl" flex-offset="1">
			<div layout flex="50">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Serveur</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<label><b> Type : </b> {{ crawl.crawlResult.headers.server }} </label> <br>
						<label><b> Version : </b> {{ crawl.crawlResult.headers['x-powered-by'] || 'Inconnu'}} </label> <br>
						<label><b> Port : </b> {{ crawl.crawlResult.request.uri.port }} </label> <br>
						<label><b> Protocole : </b> {{ crawl.crawlResult.request.uri.protocol }} </label> <br>
					</md-card-content>
				</md-card>
			</div>
			<div layout flex="50">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Site</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<label><b> Type de contenu : </b> {{ crawl.crawlResult.headers['content-type'] }} </label> <br>
						<label><b> Encodage : </b> {{ crawl.crawlResult.headers['content-encoding'] }} </label> <br>
						<label><b> Liens : </b> {{ crawl.crawlResult.headers.link || 'Aucun' }} </label> <br>
					</md-card-content>
				</md-card>
			</div>
		</div>

		<div layout layout-wrap ng-show="crawl.isRobots">
			<div layout flex="100" ng-if="crawl.robotsTxtResult.sitemaps.length > 0">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Sitemaps</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<div ng-repeat="sitemap in crawl.robotsTxtResult.sitemaps">
							<a href="{{sitemap}}" target="_blank">{{sitemap}}</a>
						</div>
					</md-card-content>
				</md-card>
			</div>
			<div layout flex="50" ng-if="crawl.robotsTxtResult.defaultEntry.rules.length > 0">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Tous les robots</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<h3 ng-if="(crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:true}).length">Autorisé</h3>
						<div ng-repeat="entry in crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:true}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
						<h3 ng-if="(crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:false}).length">Interdit</h3>
						<div ng-repeat="entry in crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:false}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
					</md-card-content>
				</md-card>
			</div>
			<div layout flex="50" ng-repeat="robot in crawl.robotsTxtResult.entries">
				<md-card flex style="background-color:#F6F6F6;" >
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">{{robot.userAgents | join}}</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<h3 ng-if="(robot.rules | filter: {allowance:true}).length">Autorisé</h3>
						<div ng-repeat="entry in robot.rules | filter: {allowance:true}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
						<h3 ng-if="(robot.rules | filter: {allowance:false}).length">Interdit</h3>
						<div ng-repeat="entry in robot.rules | filter: {allowance:false}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
					</md-card-content>
				</md-card>
			</div>
		</div>
		
		<div layout layout-wrap layout-padding>
			<div layout flex="50">
				<div ng-show="crawl.isCrawl"  flex="100">
					<h2>Résultat du Crawl</h2>
					<div>
						<h4>HEADERS</h4>
						<table class="table border-table">
							<tr ng-repeat="(key,value) in crawl.crawlResult.headers">
								<td> {{key}} </td>
								<td> {{value}} </td>
							</tr>
						</table>
					</div>
					<div>
						<h4>REQUEST</h4>
						<table class="border-table">
							<tr ng-repeat="(key,value) in crawl.crawlResult.request">
								<td> {{key}} </td>
								<td ng-if="key=='uri'">
									<table>
										<tr ng-repeat="(key2,value2) in value">
											<td> {{key2}} </td>
											<td> {{value2}} </td>
										</tr>
									</table>
								</td>
								<td ng-if="key!='uri'"> {{value}} </td>
							</tr>
						</table>
					</div>
				</div>
			</div>

			<div layout flex="50">
				<div ng-if="crawl.isRobots">
					<h2>Résultat du Robots.txt</h2>
					<pre type="txt">{{crawl.robotsTxtResult.chunks[0]}}</code>
				</div>
			</div>
		</div>


	</div>

</md-content>