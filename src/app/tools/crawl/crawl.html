<md-content layout="column" layout-padding flex md-whiteframe="2" xmlns="http://www.w3.org/1999/html">
	<div flex>
		<form>
			<div layout layout-align="center" layout-xs="column">
				<md-input-container flex="10">
					<label>Préfixe</label>
					<md-select ng-model="crawl.prefixeSelected" name="prefixe" required>
						<md-option value="http://">http://</md-option>
						<md-option value="https://">https://</md-option>
					</md-select>
				</md-input-container>
				<md-input-container flex="40" class="md-icon-float md-block">
					<label>URL</label>
					<input ng-model="crawl.url" name="url">
				</md-input-container>
				<div flex="50">
					<md-button class="md-raised" ng-click="crawl.crawl()" type="submit">CRAWL</md-button>
				</div>
			</div>
		</form>

		<div layout layout-wrap ng-show="crawl.isCrawl" flex-offset="1">
			<div layout flex="100">
				<h2>Informations de la requête HTTP</h2>
			</div>
			<div layout flex="50">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Serveur</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<label><b> Type : </b> {{ crawl.crawlResult.headers.server }} </label> <br>
						<label><b> Version : </b> {{ crawl.crawlResult.headers['x-powered-by'] || 'Inconnu'}} </label> <br>
						<label><b> Port : </b> {{ crawl.crawlResult.request.uri.port }} </label> <br>
						<label><b> Protocole : </b> {{ crawl.crawlResult.request.uri.protocol }} </label> <br>
					</md-card-content>
				</md-card>
			</div>
			<div layout flex="50">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Site</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<label><b> Dernière modification : </b> {{ (crawl.crawlResult.headers['last-modified'] | date: 'dd/MM:YYYY hh:mm') || 'Inconnu'}} </label> <br>
						<label><b> Type de contenu : </b> {{ crawl.crawlResult.headers['content-type'] }} </label> <br>
						<label><b> Encodage : </b> {{ crawl.crawlResult.headers['content-encoding'] }} </label> <br>
						<label><b> Liens : </b> {{ crawl.crawlResult.headers.link || 'Aucun' }} </label> <br>
						<label><b> Langue : </b> {{ crawl.crawlResult.headers['content-language'] || 'Non défini' }} </label> <br>
					</md-card-content>
				</md-card>
			</div>
		</div>
		<div layout layout-wrap>
			<div layout flex="50">
				<div layout layout-wrap flex ng-show="crawl.isHtaccess">
					<div layout flex="100">
						<h2>Récupération de l'htaccess</h2>
					</div>
					<div layout flex="100">
						<md-card flex style="background-color:#F6F6F6;">
							<md-card-title>
								<md-card-title-text>
									<span class="md-headline">Htaccess</span> 
								</md-card-title-text>
							</md-card-title>
							<md-card-content flex class="font-mono">
								<label>{{crawl.htaccess}}</label>
							</md-card-content>
						</md-card>
					</div>
				</div>
			</div>
			<div layout flex="50">
				<div layout layout-wrap flex ng-if="crawl.isSitemap">
					<div layout flex="100">
						<h2>Récupération du sitemap.xml</h2>
					</div>
					<div layout flex="100">
						<md-card flex style="background-color:#F6F6F6;">
							<md-card-title>
								<md-card-title-text>
									<span class="md-headline">Sitemap</span> 
								</md-card-title-text>
							</md-card-title>
							<md-card-content flex class="font-mono">
								<label ng-bind-html="crawl.sitemap"></label>
							</md-card-content>
						</md-card>
					</div>
				</div>
			</div>
		</div>

		<div layout layout-wrap ng-show="crawl.isRobots">
			<div layout flex="100">
				<h2>Récupération du Robots.txt</h2>
			</div>
			<div layout flex="100" ng-if="crawl.robotsTxtResult.sitemaps.length > 0">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Sitemaps</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<div ng-repeat="sitemap in crawl.robotsTxtResult.sitemaps">
							<a href="{{sitemap}}" target="_blank">{{sitemap}}</a>
						</div>
					</md-card-content>
				</md-card>
			</div>
			<div layout flex="50" ng-if="crawl.robotsTxtResult.defaultEntry.rules.length > 0">
				<md-card flex style="background-color:#F6F6F6;">
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Tous les robots</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<h3 ng-if="(crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:true}).length">Autorisé</h3>
						<div ng-repeat="entry in crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:true}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
						<h3 ng-if="(crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:false}).length">Interdit</h3>
						<div ng-repeat="entry in crawl.robotsTxtResult.defaultEntry.rules | filter: {allowance:false}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
					</md-card-content>
				</md-card>
			</div>
			<div layout flex="50" ng-repeat="robot in crawl.robotsTxtResult.entries">
				<md-card flex style="background-color:#F6F6F6;" >
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">{{robot.userAgents | join}}</span> 
						</md-card-title-text>
					</md-card-title>
					<md-card-content flex class="font-mono">
						<h3 ng-if="(robot.rules | filter: {allowance:true}).length">Autorisé</h3>
						<div ng-repeat="entry in robot.rules | filter: {allowance:true}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
						<h3 ng-if="(robot.rules | filter: {allowance:false}).length">Interdit</h3>
						<div ng-repeat="entry in robot.rules | filter: {allowance:false}">
							<label>{{entry.path | decodeURL}}</label>
						</div>
					</md-card-content>
				</md-card>
			</div>
		</div>
		
		<div layout layout-wrap layout-padding ng-if="crawl.isCrawl">
			<div layout flex="100">
				<h2>Requête HTTP de la page</h2>
			</div>
			<div layout flex="100">
				<json-formatter class="brutResult" flex json="crawl.crawlResult" open="2"></json-formatter>
			</div>
		</div>
		<div layout layout-wrap layout-padding ng-if="crawl.isRobots">
			<div layout flex="100">
				<h2>Résultat du Robots.txt</h2>
			</div>
			<div layout flex="100">
				<pre flex class="brutResult" type="txt">{{crawl.robotsTxtResult.chunks[0]}}</code>
			</div>
		</div>


	</div>

</md-content>